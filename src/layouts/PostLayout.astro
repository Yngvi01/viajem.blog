---
import Main from "../layouts/MainLayout.astro";
import Markdown from "../components/Markdown.astro";
import CopyRight from "../components/misc/CopyRight.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";

interface Props {
  title?: string;
  subTitle?: string;
  bannerImage?: string;
  published?: Date;
  license?: {
    name: string;
    url?: string;
  };
  author?: string;
  sourceLink?: string;
}

const { title, subTitle, bannerImage, published, license, author, sourceLink } =
  Astro.props;
---

<Main title={title} subTitle={subTitle} bannerImage={bannerImage}>
  <!-- <Fragment set:html={tocHTMLString} /> -->
  <div class="article-wrapper" itemscope itemtype="https://schema.org/Article">
    <div class="article">
      <header>
        {/* Adicionando breadcrumbs para melhorar SEO */}
        <Breadcrumbs title={title} />
        {title && <h1 class="post-title" itemprop="headline">{title}</h1>}
        {published && <time datetime={published.toISOString()} itemprop="datePublished">{published.toLocaleDateString('pt-BR', {day: 'numeric', month: 'long', year: 'numeric'})}</time>}
        {author && <span itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">{author}</span></span>}
      </header>
      <div itemprop="articleBody">
        <Markdown>
          <slot />
        </Markdown>
      </div>
      {
        published && title && (
          <footer>
            <CopyRight
              title={title}
              published={published}
              author={author}
              sourceLink={sourceLink}
            />
          </footer>
        )
      }
    </div>
  </div>
</Main>

<style>
  .article-wrapper {
    @apply mx-3 rounded-2xl bg-[var(--card-color)] px-5 py-6 lg:mx-0 lg:px-10 lg:py-9;
  }
  .article {
    @apply flex flex-col;
    font-size: var(--primary-font);
  }
</style>
